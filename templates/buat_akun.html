<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Buat Akun Baru</title>
<link rel="icon" href="{{ url_for('static', filename='add.ico') }}" type="image/x-icon">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style>
html, body {
    height: 100%;
    margin: 0;
    font-family: 'Poppins', sans-serif;

    /* Background login tetap normal */
    background: linear-gradient(160deg, #2b2b2b 0%, #3a2f2f 60%, #1e1e1e 100%);
}

/* POPUP CARD (Buat Akun) */
.card-popup {
    width: 420px;
    background: #1e1e1e;                    /* solid, tidak transparan */
    padding: 25px 25px 30px;
    border-radius: 20px;
    border: 1px solid #444;
    box-shadow: 0 0 18px rgba(0,0,0,0.6);

    /* posisi mengambang di tengah */
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;                           /* pastikan di atas login */
    color: #fff;
}

/* TOMBOL CLOSE */
.close-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    color: #fff;
    font-size: 22px;
    cursor: pointer;
    transition: 0.2s;
}
.close-btn:hover {
    color: #ff6666;
}

/* INPUT FORM */
.form-control {
    background: #2c2c2c;
    border: 1px solid #555;
    color: #fff;
    padding: 8px 12px;
    border-radius: 8px;
}

/* Fokus input */
.form-control:focus {
    background: #3a3a3a;
    border-color: #ffcc33;
    color: #fff;
    outline: none;
    box-shadow: 0 0 5px #ffcc33;
}

/* Placeholder terang */
.form-control::placeholder {
    color: #928f8f;  /* placeholder terang */
    opacity: 1;       /* terlihat jelas */
    font-size: 0.8rem;
}

/* BUTTON */
.btn-primary {
    background-color: #8B0000;
    border: none;
}
.btn-primary:hover {
    background-color: #a83232;
}

/* BLUR LOGIN CARD SAAT POPUP MUNCUL */
.blur-active {
    filter: blur(6px) brightness(0.5);
    trans
    
    ition: 0.2s;
}

/* POPUP CARD RESPONSIVE (HP/layar kecil) */
@media (max-width: 576px) { 
    .card-popup {
        width: 90%;                /* lebar popup */
        padding: 8px 10px 10px;    /* padding lebih kecil vertikal */
        top: 50%;                   
        transform: translate(-50%, -50%);
        max-height: 90vh;           /* kurangi maksimal tinggi */
        overflow-y: auto;           /* scroll jika masih overflow */
    }

    .card-popup input.form-control,
    .card-popup textarea.form-control {
        font-size: 0.8rem;          /* font lebih kecil */
        padding: 4px 6px;           /* padding input lebih compact */
    }

    .btn-primary {
        font-size: 0.8rem;          /* tombol lebih kecil */
        padding: 3px 8px;           /* padding tombol minimal */
    }
}

</style>
</head>
<body>

<!-- CARD POPUP -->
<div class="card-popup">

    <!-- Tombol Close -->
    <div class="close-btn" onclick="window.location.href='{{ url_for('login') }}'">
        <i class="bi bi-x-lg"></i>
    </div>

    <h3 class="text-center mb-3">
    <img src="{{ url_for('static', filename='add.ico') }}" 
         style="width:26px; margin-right:6px; margin-top:-4px;">
        Buat Akun Baru
    </h3>

   <form method="POST" action="{{ url_for('buat_akun.buat_akun') }}">

        <div class="mb-3">
            <label class="form-label">Nama Toko *</label>
            <input type="text" name="nama_toko" class="form-control" placeholder="Contoh: LSI Meruya" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Divisi *</label>
            <input type="text" name="divisi" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Nama *</label>
            <input type="text" name="nama" id="nama" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">No HP *</label>
            <input type="text" name="no_hp" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Email *</label>
            <input type="text" name="email" class="form-control" placeholder="Contoh: nama123@gmail.com" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Username *</label>
            <input type="text" name="username" class="form-control" required minlength="4">
        </div>

        <div class="mb-3">
            <label class="form-label">Password *</label>
            <input type="password" name="password" class="form-control" required minlength="6">
        </div>

        <button type="submit" class="btn btn-primary w-100 mt-2">Buat Akun</button>
    </form>
</div>

<!-- FLASH MESSAGE -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
        <script>
            alert("{{ message }}");
        </script>
    {% endfor %}
{% endif %}
{% endwith %}

<!-- SCRIPT UTAMA (SELALU AKTIF) -->
<script>
// Nama otomatis kapital
const inputNama = document.getElementById('nama');
if (inputNama) {
    inputNama.addEventListener('input', () => {
        inputNama.value = inputNama.value.toUpperCase();
    });
}

// Popup login blur (opsional)
function bukaPopup() {
    document.getElementById("popup")?.style?.display = "block";
    document.getElementById("login-card")?.classList?.add("blur-active");
}

function tutupPopup() {
    document.getElementById("popup")?.style?.display = "none";
    document.getElementById("login-card")?.classList?.remove("blur-active");
}
</script>

</body>
</html>
